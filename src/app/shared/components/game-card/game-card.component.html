<div class="relative group hover:z-30 hover:scale-105 transform duration-300 h-full">
  <div
    (mouseleave)="onHover(0)"
    class="rounded-t-2xl h-full flex flex-col justify-between border-2 border-b-0 border-transparent group-hover:border-primary-400"
  >
    <div class="h-52 relative flex">
      <div
        *ngFor="let screenshot of game.short_screenshots; index as i"
        class="w-full px-2 h-full flex flex-col justify-end cursor-pointer z-10 opacity-50 hover:opacity-80"
        (mouseover)="onHover(i)"
      >
        <div class="h-1 rounded-lg bg-gray-200 mb-3"></div>
      </div>

      <img
        src="{{ getImage(game?.short_screenshots?.[screenshot]?.image || game.background_image ||'') || 'assets/images/no-image.jpg'  }}"
        alt="{{ getImage(game?.short_screenshots?.[screenshot]?.image || game.background_image ||'') || 'assets/images/no-image.jpg'  }}"
        class="absolute left-0 pointer-events-none h-full w-full rounded-t-2xl"
      />
    </div>
    <div class="p-4 flex-1 bg-black rounded-b-2xl group-hover:rounded-none">
      <div class="flex justify-between items-center mb-auto">
        <div class="flex gap-2">
          <img
            title="{{ platform.platform.name }}"
            *ngFor="let platform of game.parent_platforms"
            src="assets/images/{{ platform.platform.slug }}.svg"
            alt="{{ platform.platform.name }}"
            class="h-4"
          />
        </div>
        <p
          class="rounded-md px-1 border"
          [style.color]="getColor(game.metacritic)"
          [style.borderColor]="getColor(game.metacritic) || 'transparent'"
        >
          {{ game.metacritic || "" }}
        </p>
      </div>
      <a [routerLink]="['/games', game.slug]" class="text-2xl self-start mt-2 overflow-hidden overflow-ellipsis">{{ game.name }}</a>
    </div>
  </div>
  <div
    class="
      px-4
      pb-4
      absolute
      text-sm
      max-h-0
      overflow-hidden
      opacity-0
      inset-x-0
      rounded-b-2xl
      bg-black
      bottom-0
      transform
      translate-y-full
      group-hover:max-h-screen group-hover:overflow-visible group-hover:opacity-100
      border-2 border-t-0 border-primary-400
    "
  >
    <p class="flex justify-between border-b py-2">
      <span class="text-gray-500"> Release date: </span>
      <span>
        {{ game.released | date }}
      </span>
    </p>
    <div class="flex justify-between border-b py-2">
      <span class="text-gray-500"> Genres: </span>

      <div>
        <span class="underline cursor-pointer" (click)="selectGenre(genre.id)" *ngFor="let genre of game.genres; last as L">
          {{ genre.name }}{{ L ? "" : "," }}
        </span>
      </div>
    </div>
  </div>
</div>
